local Players = game:GetService("Players")
local TeleportService = game:GetService("TeleportService")
local HttpService = game:GetService("HttpService")
local TweenService = game:GetService("TweenService")

local LocalPlayer = Players.LocalPlayer
local CoreGui = game.CoreGui

local PosBase = Vector3.new(-471, -3, 210)
local PosCimaBase = Vector3.new(-471, 32, 210)

pcall(function()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    local hum = char:FindFirstChildOfClass("Humanoid")
    if hum then
        hum.BreakJointsOnDeath = false
        hum.Health = 100
    end
end)

local mt = getrawmetatable(game)
setreadonly(mt, false)
local oldNamecall = mt.__namecall
mt.__namecall = newcclosure(function(self, ...)
    local method = getnamecallmethod()
    if tostring(self):lower():find("minato") then
        if method == "Destroy" or method == "Remove" then
            return nil
        end
    end
    return oldNamecall(self, ...)
end)

local gui = Instance.new("ScreenGui", CoreGui)
gui.ResetOnSpawn = false

local logo = Instance.new("ImageLabel", gui)
logo.Size = UDim2.new(0, 250, 0, 70)
logo.Position = UDim2.new(0, 60, 0.25, 0)
logo.BackgroundTransparency = 1
logo.Image = "rbxassetid://0"

local menu = Instance.new("Frame", gui)
menu.Size = UDim2.new(0, 240, 0, 330)
menu.Position = UDim2.new(0, 60, 0.4, 0)
menu.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
menu.BorderSizePixel = 0
menu.Active = true
menu.Draggable = true
menu.Visible = false
Instance.new("UICorner", menu).CornerRadius = UDim.new(0, 8)

local gradient = Instance.new("UIGradient", menu)
gradient.Rotation = 45
gradient.Color = ColorSequence.new(
    ColorSequenceKeypoint.new(0, Color3.fromRGB(0, 85, 255)),
    ColorSequenceKeypoint.new(1, Color3.fromRGB(255, 0, 0))
)
TweenService:Create(gradient, TweenInfo.new(5, Enum.EasingStyle.Linear, Enum.EasingDirection.InOut, -1), {Rotation = 360}):Play()

local yPos = 20
local function criarBotao(callback)
    local botao = Instance.new("TextButton", menu)
    botao.Size = UDim2.new(0.9, 0, 0, 30)
    botao.Position = UDim2.new(0.05, 0, 0, yPos)
    botao.BackgroundColor3 = Color3.fromRGB(50, 60, 200)
    botao.Text = ""
    botao.TextSize = 1
    botao.TextTransparency = 1
    botao.BorderSizePixel = 0
    Instance.new("UICorner", botao).CornerRadius = UDim.new(0, 6)
    botao.MouseButton1Click:Connect(callback)
    yPos += 35
end

criarBotao(function()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    char:PivotTo(CFrame.new(PosBase))
end)

criarBotao(function()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    char:PivotTo(CFrame.new(PosCimaBase))
end)

criarBotao(function()
    local placeId = game.PlaceId
    local url = "https://games.roblox.com/v1/games/" .. placeId .. "/servers/Public?sortOrder=Asc&limit=100"
    local success, result = pcall(function()
        return HttpService:JSONDecode(game:HttpGet(url))
    end)
    if success then
        for _, server in pairs(result.data) do
            if server.playing < server.maxPlayers and server.id ~= game.JobId then
                TeleportService:TeleportToPlaceInstance(placeId, server.id, LocalPlayer)
                break
            end
        end
    end
end)

criarBotao(function()
    menu.Visible = false
end)

local toggleBtn = Instance.new("TextButton", gui)
toggleBtn.Size = UDim2.new(0, 40, 0, 40)
toggleBtn.Position = UDim2.new(0, 10, 0.5, -20)
toggleBtn.BackgroundColor3 = Color3.fromRGB(0, 85, 255)
toggleBtn.Text = ""
toggleBtn.TextSize = 1
toggleBtn.TextTransparency = 1
toggleBtn.BorderSizePixel = 0
Instance.new("UICorner", toggleBtn).CornerRadius = UDim.new(1, 0)
toggleBtn.MouseButton1Click:Connect(function()
    menu.Visible = not menu.Visible
end)

for _, plr in pairs(Players:GetPlayers()) do
    if plr ~= LocalPlayer then
        local head = plr.Character and plr.Character:FindFirstChild("Head")
        if head then
            local esp = Instance.new("BillboardGui", head)
            esp.Size = UDim2.new(0, 100, 0, 40)
            esp.AlwaysOnTop = true

            local label = Instance.new("TextLabel", esp)
            label.Size = UDim2.new(1, 0, 1, 0)
            label.BackgroundTransparency = 1
            label.Text = ""
            label.TextColor3 = Color3.new(1, 0, 0)
            label.TextStrokeTransparency = 0
        end
    end
end

task.spawn(function()
    while true do
        task.wait(1)
        local hrp = LocalPlayer.Character and LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
        if hrp then
            for _, obj in pairs(workspace:GetDescendants()) do
                if obj.Name == "Cash" and typeof(obj) == "Instance" and obj:IsA("BasePart") then
                    hrp.CFrame = obj.CFrame + Vector3.new(0, 3, 0)
                    break
                end
            end
        end
    end
end)

task.spawn(function()
    while true do
        task.wait(5)
        for _, plr in pairs(Players:GetPlayers()) do
            local nome = plr.DisplayName or plr.Name
            local lower = nome:lower()
            if lower:find("admin") or lower:find("mod") or lower:find("dev") then
                TeleportService:Teleport(game.PlaceId)
                break
            end
        end
    end
end)
